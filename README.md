# 软件截图：

![image](https://github.com/user-attachments/assets/b2c804cc-4cc9-405a-ba09-6c9d2393e189)

![image](https://github.com/user-attachments/assets/1ffe32ee-5a30-4d70-826a-8fcb85805a1c)

# SQLite 数据库管理器 2.2.0 版 完整说明书

## 目录

1. [项目概述](#项目概述)
2. [适用人群](#适用人群)
3. [安装与运行](#安装与运行)
4. [用户界面详解](#用户界面详解)
5. [基础功能使用](#基础功能使用)
6. [高级功能使用](#高级功能使用)
7. [数据库管理](#数据库管理)
8. [表操作指南](#表操作指南)
9. [数据操作指南](#数据操作指南)
10. [SQL查询功能](#SQL查询功能)
11. [导入导出功能](#导入导出功能)
12. [性能优化](#性能优化)
13. [安全注意事项](#安全注意事项)
14. [故障排除](#故障排除)
15. [版本更新历史](#版本更新历史)
16. [技术细节](#技术细节)
17. [法律声明](#法律声明)

## 项目概述

SQLite 数据库管理器是一个功能全面的桌面应用程序，专为管理和操作 SQLite 数据库而设计。它提供了直观的图形用户界面，使得无论是数据库新手还是专业人士都能轻松地进行数据库操作。

### 主要特点

1. **跨平台支持**：基于 Python 和 PyQt5 构建，可在 Windows、macOS 和 Linux 上运行
2. **直观的界面**：提供表格视图、树形导航和 SQL 编辑器等多种视图
3. **完整的功能**：支持数据库创建、表管理、数据编辑、查询执行等所有基本操作
4. **高级特性**：包括索引管理、事务支持、执行计划分析等专业功能
5. **数据导入导出**：支持多种格式的数据交换
6. **可扩展性**：模块化设计便于功能扩展

### 应用场景

- **个人使用**：管理个人数据、收藏、日记等
- **教育用途**：学习 SQL 和数据库概念
- **小型企业**：管理客户、库存、订单等数据
- **开发测试**：快速创建和修改测试数据库
- **数据分析**：查询和分析数据

## 适用人群

### 非技术人员

**家庭用户**：可以用来管理家庭相册目录、个人收藏清单、食谱数据库等。例如，您可以创建一个"家庭电影收藏"数据库，记录每部电影的名称、类型、评分和观看日期。

**学生**：适合管理学习资料、读书笔记或研究数据。比如建立一个"参考书目"数据库，跟踪您读过的书籍及其摘要。

**小型企业主**：不需要专业IT知识就能管理客户信息、产品库存或简单的财务记录。

### IT专业人员

**数据库管理员(DBA)**：提供专业的数据库管理工具，如索引优化、执行计划分析等。

**软件开发人员**：在开发过程中快速查看和修改SQLite数据库内容，测试SQL查询。

**数据分析师**：直接从GUI执行复杂查询，导出结果进行进一步分析。

### 教育工作者

**计算机教师**：用于教授数据库基础概念和SQL语言，直观的界面有助于学生理解。

**研究人员**：管理实验数据和研究结果，便于组织和查询。

## 安装与运行

### 系统要求

- **操作系统**：Windows 7/10/11, macOS 10.15+, 或主流Linux发行版
- **Python**：3.7 或更高版本（仅限从源代码运行）
- **内存**：至少 512MB 空闲内存
- **磁盘空间**：至少 50MB 可用空间

### 安装方法

#### 方法一：直接下载可执行文件（推荐非技术人员使用）

1. 访问项目GitHub发布页面
2. 下载对应操作系统的预编译版本
3. 解压后直接运行可执行文件

#### 方法二：从源代码运行（适合开发人员）

```bash
# 克隆仓库
git clone https://github.com/duma520/SQLiteManager.git

# 进入项目目录
cd SQLiteManager

# 安装依赖
pip install -r requirements.txt

# 运行程序
python Database_Manager.py
```

### 首次运行配置

程序首次启动时会自动创建配置文件，存储在以下位置：

- Windows: `%APPDATA%\SQLiteManager\DatabaseManager.ini`
- macOS: `~/Library/Application Support/SQLiteManager/DatabaseManager.ini`
- Linux: `~/.config/SQLiteManager/DatabaseManager.ini`

## 用户界面详解

### 主窗口布局

1. **菜单栏**：提供所有功能的分类访问
2. **工具栏**：常用功能的快捷按钮
3. **数据库信息栏**：显示当前数据库路径和统计信息
4. **表视图区域**：以标签页形式显示数据库中的表
5. **SQL编辑器**：编写和执行SQL查询
6. **结果展示区**：显示查询结果，支持表格和文本两种视图
7. **状态栏**：显示操作状态和提示信息

### 菜单功能详解

#### 文件菜单

- **打开数据库**：打开现有的SQLite数据库文件
- **关闭数据库**：关闭当前打开的数据库
- **导出数据**：将数据库内容导出为SQL或CSV格式
- **导入数据**：从SQL或CSV文件导入数据
- **最近文件**：快速访问最近打开的数据库
- **退出**：关闭应用程序

#### 编辑菜单

- **复制**：复制选中的内容到剪贴板

#### 视图菜单

- **刷新**：重新加载数据库内容

#### 工具菜单

- **创建表**：通过图形界面创建新表
- **删除表**：删除现有表
- **管理索引**：为表创建或删除索引

#### 帮助菜单

- **关于**：显示程序信息和版本

## 基础功能使用

### 打开数据库

1. 点击"文件"菜单 → "打开数据库"，或工具栏上的"打开"按钮
2. 在文件对话框中选择SQLite数据库文件（扩展名通常为.db、.sqlite等）
3. 程序将加载数据库内容并在表视图区域显示所有表

*示例*：假设您有一个"contacts.db"数据库，打开后可以看到"friends"、"family"等表。

### 浏览表数据

1. 在表视图区域点击表名标签页
2. 数据将以表格形式显示，支持：
   - 水平/垂直滚动
   - 列排序（点击列标题）
   - 搜索过滤（使用搜索框）
3. 右键点击表格可弹出上下文菜单进行更多操作

### 基本数据操作

#### 添加记录

1. 打开目标表
2. 点击"添加记录"按钮
3. 在弹出的对话框中填写各字段值
4. 点击"确定"保存

*示例*：在"books"表中添加一本新书：
- 书名: "数据库系统概念"
- 作者: "Abraham Silberschatz"
- 出版年: 2020
- ISBN: "978-7-111-62867-5"

#### 编辑记录

1. 在表格中选择要修改的行（单选）
2. 点击"编辑记录"按钮或右键选择"编辑记录"
3. 在弹出的对话框中修改字段值
4. 点击"确定"保存更改

#### 删除记录

1. 在表格中选择要删除的行（可多选）
2. 点击"删除记录"按钮或右键选择"删除记录"
3. 确认删除操作

*注意*：删除操作不可撤销，请谨慎执行！

## 高级功能使用

### SQL查询执行

1. 在SQL编辑器中输入SQL语句
2. 点击"执行"按钮（或按F5键）
3. 结果将显示在下方区域：
   - "表格视图"：以表格形式显示查询结果
   - "文本视图"：以文本形式显示原始结果

*示例查询*：
```sql
-- 查找所有评分高于4的书籍
SELECT * FROM books WHERE rating > 4 ORDER BY publish_year DESC;

-- 统计每位作者的书籍数量
SELECT author, COUNT(*) as book_count 
FROM books 
GROUP BY author 
ORDER BY book_count DESC;
```

### 执行计划分析

1. 在SQL编辑器中输入SELECT查询
2. 点击"解释执行计划"按钮（或按F6键）
3. 查看查询优化器生成的执行计划，帮助优化查询性能

*示例输出*：
```
执行计划:
ID: 0, Parent: -1, NotUsed: 0, Detail: SCAN TABLE books
ID: 1, Parent: -1, NotUsed: 0, Detail: USE TEMP B-TREE FOR ORDER BY
```

### 索引管理

1. 打开目标表
2. 点击"管理索引"按钮
3. 在索引管理对话框中：
   - 查看现有索引
   - 创建新索引
   - 删除不需要的索引

*专业建议*：为经常用于查询条件或排序的列创建索引，可显著提高查询性能。但索引会占用空间并降低写入速度，不宜过度使用。

## 数据库管理

### 创建新数据库

1. 点击"文件" → "打开数据库"
2. 导航到目标文件夹
3. 在文件名输入框中输入新数据库名称（如"new_database.db"）
4. 点击"打开"，程序将创建新的空数据库

### 数据库统计信息

数据库信息栏显示以下统计信息：
- **表数量**：数据库中用户表的数量
- **总行数**：所有表中数据行的总和
- **数据库大小**：数据库文件占用的磁盘空间

*示例*：一个联系人数据库可能显示：
```
表: 3 | 总行数: 245 | 大小: 1.2 MB
```

### 数据库维护

#### 压缩数据库

SQLite数据库在删除数据后可能不会自动释放空间，可以通过以下步骤压缩：

1. 执行以下SQL命令：
```sql
VACUUM;
```

2. 或者导出整个数据库再重新导入

#### 完整性检查

执行以下SQL命令检查数据库完整性：
```sql
PRAGMA integrity_check;
```

正常结果应返回"ok"，如有问题会报告具体错误。

## 表操作指南

### 创建新表

1. 点击"工具" → "创建表"
2. 在弹出的对话框中：
   - 输入表名
   - 添加列并设置列属性（名称、类型、约束等）
   - 预览生成的SQL语句
3. 点击"确定"创建表

*示例*：创建一个"students"表，包含：
- id：整数，主键，自增
- name：文本，非空
- age：整数
- email：文本，唯一
- enroll_date：文本（存储日期）

### 修改表结构

目前SQLite管理器不直接支持图形化修改表结构，但可以通过SQL命令实现：

```sql
-- 添加新列
ALTER TABLE students ADD COLUMN major TEXT;

-- 重命名表
ALTER TABLE students RENAME TO pupils;
```

*注意*：SQLite的ALTER TABLE功能有限，复杂修改可能需要创建新表并迁移数据。

### 删除表

1. 点击"工具" → "删除表"
2. 从列表中选择要删除的表
3. 确认删除操作

*警告*：表删除后将无法恢复，所有数据将永久丢失！

## 数据操作指南

### 批量操作

虽然界面主要支持单行操作，但可以通过SQL执行批量更新：

```sql
-- 将所有计算机科学专业学生的学分加2
UPDATE students 
SET credits = credits + 2 
WHERE major = 'Computer Science';

-- 删除所有毕业学生记录
DELETE FROM students 
WHERE graduation_date IS NOT NULL 
AND graduation_date < date('now');
```

### 数据验证

在添加或编辑数据时，程序会检查：
1. 非空约束（NOT NULL）
2. 主键唯一性
3. 数据类型匹配

如违反约束将显示错误信息，拒绝操作。

### 事务支持

程序自动为每个操作使用事务，确保数据一致性。您也可以手动控制事务：

```sql
BEGIN TRANSACTION;
-- 执行一系列操作
COMMIT;
-- 或出错时 ROLLBACK;
```

## SQL查询功能

### 查询构建技巧

1. **基本查询**：
```sql
SELECT * FROM table WHERE condition;
```

2. **聚合函数**：
```sql
SELECT department, AVG(salary) as avg_salary 
FROM employees 
GROUP BY department 
HAVING AVG(salary) > 5000;
```

3. **多表连接**：
```sql
SELECT o.order_id, c.name, o.order_date 
FROM orders o 
JOIN customers c ON o.customer_id = c.id;
```

### 保存常用查询

虽然程序不直接提供查询保存功能，但您可以：
1. 将常用SQL保存在文本文件中
2. 使用时复制粘贴到SQL编辑器
3. 或使用"文件" → "导入"功能导入SQL文件

## 导入导出功能

### 导出选项

1. **完整数据库导出**：
   - SQL格式：包含表结构和所有数据
   - CSV格式：每个表导出为单独的工作表

2. **单表导出**：
   - 打开表后使用"导出数据"按钮
   - 可选择SQL或CSV格式

3. **查询结果导出**：
   - 执行查询后右键结果表格
   - 选择"导出结果"

### 导入选项

1. **SQL文件导入**：
   - 执行文件中的所有SQL语句
   - 适合恢复备份或执行批量操作

2. **CSV文件导入**：
   - 自动创建表（根据CSV第一行列名）
   - 或导入到现有表（列名需匹配）

*专业提示*：导入大型CSV文件时，考虑先创建适当的表结构和索引，再导入数据，可提高性能。

## 性能优化

### 查询优化建议

1. **使用索引**：为WHERE、JOIN和ORDER BY中常用的列创建索引
2. **限制结果集**：使用LIMIT子句避免返回过多数据
3. **只选择需要的列**：避免使用SELECT *
4. **分析执行计划**：使用EXPLAIN找出性能瓶颈

### 数据库优化

1. **定期执行VACUUM**：回收闲置空间
2. **合理设置页面大小**（高级用户）：
```sql
PRAGMA page_size = 4096; -- 在创建数据库前设置
```
3. **启用WAL模式**（高级用户）：
```sql
PRAGMA journal_mode = WAL;
```

## 安全注意事项

### 数据安全

1. **定期备份**：导出重要数据库到安全位置
2. **敏感数据**：避免在SQLite中存储未加密的敏感信息
3. **文件权限**：确保数据库文件有适当的访问权限设置

### SQL注入防护

虽然本程序主要用于个人和开发环境，但仍需注意：
1. 不要执行不受信任的SQL脚本
2. 从外部源导入数据前先检查内容
3. 在生产环境中考虑使用参数化查询

## 故障排除

### 常见问题及解决方案

1. **无法打开数据库**：
   - 检查文件是否被其他程序锁定
   - 验证文件是否是有效的SQLite数据库
   - 检查文件权限

2. **SQL执行错误**：
   - 检查SQL语法是否正确
   - 验证表名和列名是否正确
   - 确保满足所有约束条件

3. **程序无响应**：
   - 大型操作可能需要时间等待
   - 强制关闭后检查数据库完整性

### 错误代码参考

- **SQLITE_BUSY**：数据库被锁定，请关闭其他可能访问该文件的程序
- **SQLITE_CORRUPT**：数据库损坏，尝试从备份恢复
- **SQLITE_CONSTRAINT**：违反约束条件，检查数据有效性

## 版本更新历史

### 版本 2.2.0 (2025-05-26)

1. **新增功能**：
   - 添加系统托盘支持，程序最小化到托盘
   - 增强的SQL语法高亮，支持更多关键字
   - 新增数据库统计信息显示（表数量、总行数、大小）

2. **改进**：
   - 优化大型表的数据加载性能
   - 改进导出功能，支持更多格式选项
   - 增强的索引管理界面

3. **修复**：
   - 修正事务处理中的若干问题
   - 修复CSV导入时的编码问题
   - 解决若干UI小问题

### 版本 2.1.0 (2025-04-15)

1. **新增功能**：
   - 实现完整的索引管理功能
   - 添加执行计划分析工具
   - 支持SQL格式化

2. **改进**：
   - 增强表数据编辑体验
   - 优化内存使用
   - 改进错误处理机制

### 版本 2.0.0 (2025-03-01)

1. **重大更新**：
   - 完全重写用户界面
   - 新增多标签页表浏览
   - 添加高级SQL编辑器

2. **新功能**：
   - 支持事务操作
   - 添加数据导入导出功能
   - 实现最近文件列表

## 技术细节

### 架构概述

SQLite 数据库管理器采用经典的三层架构：

1. **表示层**：PyQt5实现的用户界面
2. **业务逻辑层**：处理用户操作和数据库交互
3. **数据访问层**：Python的sqlite3模块

### 数据库连接

程序使用Python内置的sqlite3模块与SQLite数据库交互，关键配置包括：
- 设置行工厂为sqlite3.Row，便于按列名访问
- 关闭隔离级别，手动控制事务
- 启用外键支持（PRAGMA foreign_keys = ON）

### 扩展性

开发者可以通过以下方式扩展功能：
1. 添加新的菜单项和工具栏按钮
2. 实现新的对话框处理特定任务
3. 继承现有视图类添加新功能

## 法律声明

### 版权信息

© 2025 杜玛 保留所有权利

### 许可条款

本项目采用MIT许可证，核心条款包括：
- 允许自由使用、复制、修改和分发
- 不提供任何担保
- 保留原始版权声明和许可文件

### 免责声明

作者不对使用本软件造成的任何直接或间接损失负责。用户应自行承担使用风险，特别是处理重要数据时务必做好备份。

---

**结束语**

本SQLite数据库管理器旨在为用户提供强大而易于使用的数据库管理工具。无论您是偶尔需要查看简单数据库的家庭用户，还是每天处理复杂查询的数据库管理员，都能从中找到所需功能。

我们建议新用户从基础功能开始，逐步探索更高级的特性。遇到任何问题或建议，欢迎通过GitHub Issues与我们分享。

祝您使用愉快！

杜玛
2025年5月
